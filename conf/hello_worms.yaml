imports:

- classpath:/org/kurator/akka/actors.yaml

components:

- id: RecordSource
  type: CsvFileReader
  properties:
    parameters:
      filePath: public/worms_in.csv

- id: WoRMSNameCurator
  type: PythonClassActor
  properties:
    pythonClass: org.kurator.validation.actors.WoRMSCurator.WoRMSCurator
    onData: curate_taxon_name_and_author
    listensTo:
      - !ref RecordSource

- id: FileWriter
  type: CsvFileWriter
  properties:
    listensTo:
      - !ref WoRMSNameCurator
    parameters:
      filePath: public/worms_out.csv

- id: DoneSource
  type: ConstantSourceActor
  properties:
    listensTo:
      - !ref FileWriter
    parameters:
      value: Done
 
- id: GreetingPrinter
  type: PrinterActor
  properties:
    listensTo:
      - !ref DoneSource
    parameters:
      endWithSeparator: true
 

- id: HelloWormsWorkflow
  type: Workflow
  properties:
    actors:
      - !ref RecordSource
      - !ref WoRMSNameCurator
      - !ref FileWriter
      - !ref DoneSource
      - !ref GreetingPrinter
    parameters:
      greeting:
        actor: !ref RecordSource
        parameter: filePath
 
