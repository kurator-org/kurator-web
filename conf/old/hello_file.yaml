imports:

- classpath:/org/kurator/akka/actors.yaml
- classpath:/fields.yaml

components:

- id: GreetingSource
  type: ConstantSourceActor
  properties:
    parameters:
      value: Hello World!

- id: FileWriter
  type: StringFileWriter
  properties:
    listensTo:
      - !ref GreetingSource
    parameters:
      filePath: hello_out.csv

- id: DoneSource
  type: ConstantSourceActor
  properties:
    listensTo:
      - !ref FileWriter
    parameters:
      value: Done
 
- id: GreetingPrinter
  type: PrinterActor
  properties:
    listensTo:
      - !ref DoneSource
    parameters:
      endWithSeparator: true
 

- id: HelloWorldWorkflow
  type: Workflow
  properties:
    actors:
      - !ref GreetingSource
      - !ref FileWriter
      - !ref DoneSource
      - !ref GreetingPrinter
    parameters:
      greeting:
        actor: !ref GreetingSource
        parameter: value
      out:
        actor: !ref FileWriter
        parameter: filePath

- id: WorkflowView
  type: FormDefinition
  properties:
    fields:
      - !ref GreetingField
    name: hello_file
    title: Hello File
    outputFormat: text

- id: GreetingField
  type: TextField
  properties:
    name: greeting
    label: Greeting
