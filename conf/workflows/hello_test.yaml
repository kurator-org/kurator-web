imports:

- classpath:/org/kurator/akka/actors.yaml
- classpath:/fields.yaml

components:

- id: GreetingSource
  type: ConstantSourceActor
  properties:
    parameters:
      value: Hello World!

- id: FileWriter
  type: StringFileWriter
  properties:
    listensTo:
      - !ref GreetingSource
    parameters:
      filePath: hello_out.csv

- id: DoneSource
  type: ConstantSourceActor
  properties:
    listensTo:
      - !ref FileWriter
    parameters:
      value: Done
 
- id: GreetingPrinter
  type: PrinterActor
  properties:
    listensTo:
      - !ref DoneSource
    parameters:
      endWithSeparator: true
 

- id: HelloWorldWorkflow
  type: Workflow
  properties:
    actors:
      - !ref GreetingSource
      - !ref FileWriter
      - !ref DoneSource
      - !ref GreetingPrinter
    parameters:
      greeting:
        actor: !ref GreetingSource
        parameter: value
      out:
        actor: !ref FileWriter
        parameter: filePath

- id: WorkflowView
  type: FormDefinition
  properties:
    fields:
      - !ref FileFormatField
      - !ref YesNoField
      - !ref DescriptionField
      - !ref CheckMeField
    name: hello_test
    title: Hello Test

- id: FileFormatField
  type: SelectField
  properties:
    name: format
    label: File format
    options:
      csv: CSV
      json: JSON
      text: Text

- id: YesNoField
  type: RadioGroup
  properties:
    name: choose
    label: Choose
    options:
      yes: Yes
      no: No

- id: DescriptionField
  type: TextField
  properties:
    name: description
    textArea: true
    label: Description

- id: CheckMeField
  type: CheckBox
  properties:
    name: checkme
    label: Check Me
