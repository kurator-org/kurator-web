# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page and misc actions for features currently in development (builder, ffdq)
# ~~~~
GET     /                                       controllers.Application.index()
GET     /jsroutes                               controllers.Application.jsRoutes()

GET     /builder                                controllers.Application.builder()
GET     /summary/*id                            controllers.Application.summary(id : Long)

GET     /workflows                                   controllers.Application.test()
GET     /auth                                   controllers.Application.auth()
GET     /data                                   controllers.Application.data()

# User authentication and user data routes, login, registration, password reset
# ~~~~
GET     /login                                  controllers.Users.login()
GET     /logout                                 controllers.Users.logout()

GET     /register                               controllers.Users.register()
POST    /register                               controllers.Users.registerSubmit()

POST    /authenticate                           controllers.Users.authenticate()

GET     /reset                                  controllers.Users.reset()
POST    /reset                                  controllers.Users.resetPassword()

GET     /password                               controllers.Users.change()
POST    /password                               controllers.Users.changePassword()

GET     /uploads                                controllers.Users.listUploads()

# Admin and user management, user accounts and user groups
# ~~~~
GET     /admin/users                            controllers.Users.manage()
POST    /admin/users                            controllers.Users.manageUsers()

GET     /admin/groups                           controllers.Users.workshop()
POST    /admin/groups                           controllers.Users.createWorkshop()

GET     /admin/viewruns                         controllers.Users.userRuns()

# Workflow management routes, package deployment and workflow metadata
# ~~~~
GET     /workflow/*name                         controllers.Workflows.workflow(name: String)
POST    /workflow/*name                         controllers.Workflows.runWorkflow(name: String)

GET     /workflows/deploy                       controllers.Workflows.deploy()
POST    /workflows/deploy                       controllers.Workflows.deployWorkflows()

GET     /workflows/list                         controllers.Workflows.list()
POST    /workflows/delete                       controllers.Workflows.deletePackage(name : String)

# Workflow run routes for managing user runs and artifacts (result, report, logs)
# ~~~~
GET     /run/status/*uid                        controllers.Workflows.status(uid : String)

GET     /run/result/*id                         controllers.Workflows.resultArchive(id : Long)
GET     /run/report/*id                         controllers.Workflows.report(id : Long)

GET     /run/error/*id                          controllers.Workflows.errorLog(id : Long)
GET     /run/output/*id                         controllers.Workflows.outputLog(id : Long)

POST    /run/remove/*id                         controllers.Workflows.removeRun(id : Long)

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file                           controllers.Assets.at(path="/public", file)