@main(title = "The Kurator 'helloworld' application") {

    <h1>Run Hello Workflow</h1>

     <script type="text/javascript">
        $(function() {
            $("#complete").hide();

            $("#progressbar").progressbar({
                value: false
            }).hide();


            $("#run").click(function() {
                $("#progressbar").show("fade");
                jsRoutes.controllers.Workflow.runhello().ajax({
                    success: function (data) {
                        $("#result").html(data.output);
                        $("#download").attr("href", "/result/" + data.filename);
                        console.log(data)
                        $("#progressbar").hide("fade");
                        $("#complete").show("drop");
                    },
                    error: function (request, status, error) {
                        $("#progressbar").hide("fade");
                        $("#error").html(data);
                    }
                });
            });
        });
     </script>

    <button id="run">Run workflow</button>
    <div id="progressbar" class="ui-progressbar-indeterminate"></div>
    <div id="complete">
        Result: <span id="result"></span>
        <a id="download">Download csv...</a>
    </div>
    <div id="error"></div>

}